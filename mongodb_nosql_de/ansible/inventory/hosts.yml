---
# Ansible Inventory
# Dynamic inventory can be used with AWS EC2 plugin

all:
  children:
    staging:
      hosts:
        # These will be populated dynamically or via terraform output
        staging-pipeline-1:
          ansible_host: "{{ staging_pipeline_ip_1 }}"
          ansible_user: ec2-user
          environment: staging
        staging-pipeline-2:
          ansible_host: "{{ staging_pipeline_ip_2 }}"
          ansible_user: ec2-user
          environment: staging
      vars:
        mongodb_uri: "{{ mongodb_staging_uri }}"
        environment: staging

    production:
      hosts:
        prod-pipeline-1:
          ansible_host: "{{ prod_pipeline_ip_1 }}"
          ansible_user: ec2-user
          environment: production
        prod-pipeline-2:
          ansible_host: "{{ prod_pipeline_ip_2 }}"
          ansible_user: ec2-user
          environment: production
      vars:
        mongodb_uri: "{{ mongodb_production_uri }}"
        environment: production

  vars:
    ansible_python_interpreter: /usr/bin/python3
    project_dir: /opt/data-pipeline
    app_user: pipeline
    app_group: pipeline
